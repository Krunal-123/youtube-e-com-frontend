import{e as A,r as p,a0 as O,a5 as B,j as e,o as _,a6 as D,L as I,h as j,g as Y,T as F}from"./index-CslP1rqZ.js";import{U as S,k as f,P as b,_ as g,d as k,c as G,J as C}from"./mdb-react-ui-kit.esm-DqwfMsyp.js";import{D as $}from"./DisableScrollRestoration-C3JXvFJB.js";import{a as L}from"./Button-DjIN9bvl.js";function K(){const{setCartItems:d,user:s,setIsExploding:u,LightMode:r,setLengthCart:E}=A(),[a,x]=p.useState([]),[T]=O(),z=B(),o=a.reduce((t,n)=>t+n.price,0),N=o===0?0:Math.floor(o/2*.18),h=Math.floor(o/2+N);p.useEffect(()=>{s&&s[0]&&x(s[0].addcart||[])},[s]),p.useEffect(()=>{d(a.length||0)},[a,d]);async function M(t){try{await j.post(`http://localhost:3000/addcart/delete/${t}`,{cookies:T}),Y("Deleted",1e3),x(n=>n.filter(i=>i._id!==t))}catch(n){console.error("Error deleting item:",n)}}async function P(){var t,n,i,y;try{const{data:c}=await j.post("http://localhost:3000/create-order",{amount:h}),R={key:"rzp_test_wh5dAj2ZhVsw97",amount:c.amount,currency:"INR",name:"Youtube E-com Services",description:"Test Transaction",order_id:c.id,handler:async function(U){var w;try{let m=(w=s[0])==null?void 0:w._id;const v=a.map(l=>l._id);await j.post("http://localhost:3000/addcart/purchase",{data:v,id:m,amount:h}),E(v),x([]),d(0),u(l=>!l),z("/mypurchase"),F("New Items AddedðŸŽ‰",3500),setTimeout(()=>{u(l=>!l)},5e3)}catch(m){console.error("Error finalizing purchase:",m)}},prefill:{name:`${(t=s==null?void 0:s[0])==null?void 0:t.firstName} ${(n=s==null?void 0:s[0])==null?void 0:n.lastName}`,email:`${(i=s==null?void 0:s[0])==null?void 0:i.email}`,contact:`${(y=s==null?void 0:s[0])==null?void 0:y.number}`},theme:{color:"#3399cc"}};new window.Razorpay(R).open()}catch(c){console.error("Error initializing Razorpay payment:",c)}}return a.length===0?e.jsxs("section",{className:"h-[550px] bg-[length:100%_100%] bg-no-repeat bg-center bg-[url('https://www.pngkey.com/png/detail/365-3654131_cart-empty-image-your-cart-is-empty.png')]",children:[e.jsx($,{}),e.jsx(_,{className:"py-5",children:e.jsxs("div",{className:"text-center my-40 align-items-center",children:[e.jsxs("h5",{className:"text-red-500 text-7xl mb-5 font-bold d-flex justify-content-center font-mono",children:[e.jsx(D,{}),"Your cart is empty now"]}),e.jsx(I,{to:"/home",children:e.jsx(L,{className:"bg-primary hover:opacity-[0.9]",children:"Continue Browsing"})})]})})]}):e.jsxs(_,{className:"mt-4 mb-5",children:[e.jsx($,{}),e.jsx(S,{className:"justify-content-center align-items-center",children:e.jsx(f,{children:e.jsx(b,{className:`shadow-2xl transition ease-in-out delay-300 ${r?"bg-gray-600":"bg-white"} ${r?"text-white":"text-dark"} ${r&&"hover:shadow-[0_0px_22px_2px_rgba(220,255,0,0.9)]"}`,children:e.jsx(g,{className:"px-4",children:e.jsxs(S,{children:[e.jsxs(f,{lg:"7",children:[e.jsxs(I,{to:"/home",className:`block pb-3 text-lg font-semibold transition easy-in-out hover:font-bold hover:scale-[1.02] ${r&&"hover:text-cyan-300"}`,children:[e.jsx(k,{fas:!0,icon:"long-arrow-alt-left"})," Continue shopping"]}),e.jsx("hr",{}),e.jsx("div",{className:"d-flex justify-content-between align-items-center mb-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"my-2 text-xl font-bold",children:"Shopping cart"}),e.jsxs("p",{className:"text-xl font-mono",children:["You have ",e.jsx("span",{className:"font-extrabold text-red-500 text-2xl",children:a.length})," items in your cart :"]})]})}),a.map(t=>e.jsx(b,{className:"mb-3 transition ease-in-out hover:scale-[1.02]",children:e.jsx(g,{className:`border-1 ${r?"bg-gray-800":"bg-light"} text-${r?"white":"dark"}`,children:e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsxs("div",{className:"d-flex flex-row align-items-center",children:[e.jsx(G,{src:t.img,fluid:!0,className:"rounded-3",style:{width:"75px",height:"60px"},alt:t.title}),e.jsx("div",{className:"ms-3",children:e.jsx(C,{tag:"h5",children:e.jsx("b",{children:t.title})})})]}),e.jsxs("div",{className:"d-flex flex-row align-items-center",children:[e.jsx("div",{style:{width:"80px"},children:e.jsx(C,{tag:"h5",className:"mb-0",children:e.jsxs("i",{children:[e.jsxs("span",{className:"text-red-500 font-semibold",children:["â‚¹",Math.floor(t.price/2).toLocaleString("en-IN")]}),e.jsx("br",{}),e.jsxs("span",{className:"line-through",children:["â‚¹",Math.floor(t.price).toLocaleString("en-IN")]})]})})}),e.jsx(k,{fas:!0,icon:"trash-alt",className:"py-1 px-2 border-0 rounded text-slate-50 bg-slate-900 transition ease-in-out cursor-pointer text-xl hover:bg-red-600 hover:scale-110 hover:showdow-2xl",onClick:()=>M(t._id)})]})]})})},t._id))]}),e.jsx(f,{lg:"5",children:e.jsx(b,{className:"bg-dark text-white rounded-3 h-100",children:e.jsxs(g,{children:[e.jsx("div",{tag:"h5",className:"mb-3 text-3xl font-extrabold text-center text-green-500",children:"Payment Options"}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between mt-4 text-3xl font-bold",children:[e.jsx("p",{className:"mb-4 flex justify-between",children:"Items :"}),e.jsx("p",{className:"mb-4 flex justify-between",children:"Prices :"})]}),a==null?void 0:a.map((t,n)=>e.jsxs("div",{className:"d-flex justify-content-between mb-2 text-xl",children:[e.jsxs("p",{className:"mb-4 flex justify-between",children:["- ",t.title]}),e.jsxs("p",{className:"mb-4 flex justify-between",children:["â‚¹",Math.floor(t.price/2).toLocaleString("en-IN")]})]},n)),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between mt-3 text-lg",children:[e.jsx("p",{className:"mb-4",children:"GST 18% :"}),e.jsx("p",{className:"mb-4",children:"â‚¹"+N.toLocaleString("en-IN")})]}),e.jsxs("div",{className:"d-flex justify-content-between text-xl",children:[e.jsx("p",{className:"mb-4",children:"Subtotal"}),e.jsx("p",{className:"mb-4 line-through font-bold",children:"â‚¹"+o.toLocaleString("en-IN")})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between mt-3",children:[e.jsx("p",{className:"mb-4",children:"Applied Coupen"}),e.jsx("p",{className:"text-red-500 text-xl font-extrabold",children:"50% OFF"})]}),e.jsxs("div",{className:"d-flex justify-content-between text-2xl",children:[e.jsx("p",{className:"mb-4",children:"Total (Incl. taxes)"}),e.jsx("p",{className:"mb-4 text-green-500 font-bold",children:"â‚¹"+Math.floor(h).toLocaleString("en-IN")})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(L,{className:"bg-red-600 border-0 text-xl px-5 py-3 hover:bg-green-600 transition ease-in-out duration-300 delay-200 hover:scale-[1.02]",onClick:P,children:e.jsxs("span",{children:["Place Order",e.jsx("i",{className:"fas fa-long-arrow-alt-right ms-2"})]})})})]})})})]})})})})})]})}export{K as default};
